<!-- bots/docs/README.html -->
<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>Belles-Terres — Guide équipe (édition à chaud, sans technique)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body{font:16px/1.6 system-ui,Segoe UI,Roboto,Arial,sans-serif;color:#eee;background:#111;margin:0;padding:24px}
    h1,h2,h3{color:#fff;margin:0.6em 0}
    .card{background:#151515;border:1px solid #242424;border-radius:12px;padding:14px;margin:14px 0}
    code,kbd{background:#1f1f1f;border:1px solid #2a2a2a;border-radius:6px;padding:0 6px}
    pre{background:#0f0f0f;border:1px solid #242424;border-radius:10px;padding:12px;overflow:auto}
    ul,ol{margin-left:1.1em}
    .muted{color:#aaa}
    .ok{color:#9be79b}
    .warn{color:#f6d06f}
    .bad{color:#ff9393}
  </style>
</head>
<body>
  <h1>Belles-Terres — Guide “édition à chaud” (pour l’équipe)</h1>
  <p class="muted">Ce guide explique <strong>comment modifier le contenu</strong> directement depuis la page (bas d’écran), <strong>sans logiciel</strong> et <strong>sans risque</strong>. Vous testez, et si ça vous convient, on recopie plus tard dans les “vrais” fichiers.</p>

  <div class="card">
    <h2>Ce que vous pouvez changer (sans rien casser)</h2>
    <ul>
      <li><strong>Monde</strong> : le contexte, les lieux, les faits, le petit “lore”.</li>
      <li><strong>Personas</strong> : la fiche de chaque personnage (style, tics, positions, voix).</li>
      <li><strong>Prompt (règles)</strong> : comment l’IA parle (ton simple, bienveillance, pas de listes visibles, etc.).</li>
      <li><strong>Questions</strong> <span class="ok">Nouveau</span> : une <em>banque</em> de questions par valeur (respect, justice, partage…). Le bot en pioche 1 comme graine.</li>
      <li><strong>Explications</strong> : ce guide (vous le lisez en ce moment).</li>
      <li><strong>Commentaires</strong> : un petit formulaire pour nous laisser un feedback (il est stocké automatiquement).</li>
          <li><strong>Coût api</strong> 0.015$ la minute de génération audio soit 0.9$ l'heure, et texte négligeable (0.02-0.03$ pour 1000 prompt)</li>

    </ul>
  </div>

  <div class="card">
    <h2>Mode d’emploi (3 étapes)</h2>
    <ol>
      <li>Ouvrir l’onglet voulu (Monde / Personas / Prompt / <strong>Questions</strong>).</li>
      <li>Éditer le texte (ou le JSON). <em>Astuce :</em> allez-y par petites touches.</li>
      <li>Cliquer sur <strong>Nouvelle conversation</strong> pour tester le résultat.</li>
    </ol>
    <p class="muted">Vos essais restent en mémoire locale du navigateur. Rien n’écrase les fichiers tant que l’on ne les recopie pas.</p>
  </div>

  <div class="card">
    <h2>Que contient chaque onglet ?</h2>

    <h3>Monde</h3>
    <p>Le contexte de l’histoire (lieux, contraintes, dilemmes, faits utiles, petits événements, et un “lore” court). Le bot s’appuie dessus pour rester cohérent.</p>
<pre>{
  "lieu": "Belles-Terres — Côte-Nord",
  "places": ["Salle du forum", "Port", "Plateau des éoliennes"],
  "constraints": ["Budget limité", "Bruits", "Oiseaux migrateurs"],
  "factsBank": ["Phrase factuelle courte n°1", "n°2"],
  "recentEvents": ["Événement 1", "Événement 2"],
  "lore": { "headline": "La nouvelle du jour… (1 phrase max)" }
}</pre>
    <p class="muted">Conseil : des <strong>phrases courtes</strong> dans <code>factsBank</code>. Si vous n’êtes pas sûr d’un fait : écrivez “à vérifier”.</p>

    <h3>Personas</h3>
    <p>Chaque personnage parle en “je” et garde sa personnalité. Champs utiles :</p>
<pre>[
  {
    "id": "gaspard",
    "displayName": "Gaspard — Pêche & traditions",
    "bio": "Vieux marin grincheux mais gentil",
    "relanceTriggers": ["proposition","où","pourquoi"],
    "taboos": ["pas de moqueries", "pas de chiffres inventés"],
    "avatar": "./assets/avatars/Gaspard_profile.png",
    "openaiVoice": "alloy",              // voix de synthèse
    "openaiStyle": "older sailor, calm", // style de voix
    "openaiRate": 0.95,                  // un peu plus lent (0.5–1.5)
    "valueFocus": "respect"              // angle de question préféré
  }
]</pre>
    <p class="muted">Ne changez pas l’ordre des crochets/virgules. Si vous voyez du rouge, c’est que le <strong>JSON est invalide</strong> (il faut corriger).</p>

    <h3>Prompt (règles)</h3>
    <p>Le “mode d’emploi” interne : ton 10–12 ans, concision, pas de listes visibles, 0–1 relance douce, etc. <strong>Info :</strong> l’éditeur ici est informatif — pour vraiment changer ces règles, il faudra recopier dans le vrai fichier plus tard.</p>

    <h3>Questions <span class="ok">Nouveau</span></h3>
    <p>Le bot prend 1 <em>question graine</em> au début selon la <strong>valeur</strong> du persona (respect, justice, partage…). Il pose ensuite <strong>au plus 1 relance courte</strong>. Vous pouvez enrichir :</p>
<pre>{
  "respect": {
    "initial": ["Le règlement du parc respecte-t-il tout le monde ?"],
    "relances": ["À quoi servent ces règles ici ?", "Qui est avantagé ?"]
  },
  "justice": {
    "initial": ["Quelle décision te paraît la plus juste ?"],
    "relances": ["Quels critères (besoin, mérite, hasard) ?"]
  }
}</pre>
    <p class="muted">Astuce : 1 ou 2 questions par catégorie suffisent largement pour éviter l’effet “questionnaire”.</p>

    <h3>Explications</h3>
    <p>Ce guide.</p>

    <h3>Commentaires</h3>
    <p>Un champ pour nous envoyer un avis (idée, bug). Pas besoin d’e-mail : c’est déposé automatiquement dans notre stockage.</p>
  </div>

  <div class="card">
    <h2>Comment tester “en vrai”</h2>
    <ul>
      <li>Choisir un persona dans le menu <strong>Persona</strong> (avatar en haut à droite).</li>
      <li>Écrire un message ; cocher <strong>Voix</strong> si vous voulez que le bot parle.</li>
      <li>La réponse texte s’affiche au moment où <strong>l’audio démarre</strong> (synchronisé).</li>
      <li>Si c’est long à répondre, vous verrez d’abord un <code>…</code> (attente réseau), puis la réponse.</li>
    </ul>
  </div>

  <div class="card">
    <h2>En cas de pépin</h2>
    <ul>
      <li><span class="bad">Tout devient rouge dans un éditeur</span> : c’est du JSON invalide. Revenez en arrière (Ctrl+Z) ou remettez une version simple.</li>
      <li>Le bot parle “pareil” pour tous : vérifiez que chaque persona a bien sa <code>bio</code>, ses <code>tics</code>, éventuellement une <code>valueFocus</code>.</li>
      <li>Pas de son : décochez “Voix”, testez sans audio ; puis recocher. Parfois le navigateur demande une 1<sup>re</sup> interaction (clic) avant de jouer un son.</li>
    </ul>
  </div>

  <p class="muted">Quand on est satisfait des essais : on recopie simplement le contenu validé vers les fichiers officiels (<code>data/*.json</code> et <code>assets/prompt.js</code>), puis on publie.</p>
</body>
</html>
